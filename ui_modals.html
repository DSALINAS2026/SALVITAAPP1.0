<!-- MODAL: AGREGAR CHASIS -->
<div class="modalBackdrop" id="modalAdd">
  <div class="modal">
    <div style="display:flex;justify-content:space-between;align-items:center;gap:10px;">
      <h3>Agregar Chasis</h3>
      <button class="btn secondary" onclick="closeAdd()">Cerrar</button>
    </div>

    <div class="grid" style="margin-top:10px;">
      <div>
        <label class="muted"><b>Interno</b></label>
        <input id="fInterno" placeholder="Ej: 1234" />
      </div>
      <div>
        <label class="muted"><b>Dominio</b></label>
        <input id="fDominio" placeholder="Dominio/Patente (Ej: AE123BC)" />
      </div>
      <div>
        <label class="muted"><b>Sociedad</b></label>
        <input id="fSociedad" placeholder="Dueño/Empresa" />
      </div>
      <div>
        <label class="muted"><b>Depósito</b></label>
        <input id="fDeposito" placeholder="Ej: Central / Taller / Base" />
      </div>

      <div>
        <label class="muted"><b>Tipo</b></label>
        <input id="fTipo" placeholder="Tipo de chasis (Ej: Semi / Bus / Camión)" />
      </div>
      <div>
        <label class="muted"><b>Km Recorridos</b></label>
        <input id="fKm" placeholder="0" />
      </div>

      <div>
        <label class="muted"><b>Capacidad de Carga</b></label>
        <input id="fCapacidad" placeholder="Ej: 30T / 45000kg" />
      </div>
      <div>
        <label class="muted"><b>Nro. Chasis</b></label>
        <input id="fNroChasis" placeholder="Número de chasis" />
      </div>

      <div>
        <label class="muted"><b>Marca</b></label>
        <input id="fMarca" placeholder="Ej: Mercedes / Scania / Volvo" />
      </div>
      <div>
        <label class="muted"><b>Modelo</b></label>
        <input id="fModelo" placeholder="Ej: 113 / K310 / etc." />
      </div>

      <div>
        <label class="muted"><b>Motor</b></label>
        <input id="fMotor" placeholder="Ej: OM457 / DC13 / etc." />
      </div>
      <div>
        <label class="muted"><b>Nro Motor</b></label>
        <input id="fNroMotor" placeholder="Número de motor" />
      </div>

      <div>
        <label class="muted"><b>Año</b></label>
        <input id="fAnio" placeholder="Ej: 2018" />
      </div>

      <div>
        <label class="muted"><b>Eje</b></label>
        <select id="fEje"></select>
      </div>

      <div>
        <label class="muted"><b>Mapa Cubierta</b></label>
        <select id="fMapa"></select>
      </div>

      <div>
        <label class="muted"><b>Carrocería</b></label>
        <select id="fCarroceria"></select>
      </div>

      <div>
        <label class="muted"><b>Estado</b></label>
        <select id="fEstado">
          <option value="activo">activo</option>
          <option value="inactivo">inactivo</option>
          <option value="baja">baja</option>
        </select>
      </div>
    </div>

    <div style="display:flex;gap:10px;justify-content:flex-end;margin-top:12px;">
      <button class="btn secondary" onclick="closeAdd()">Cancelar</button>
      <button class="btn" id="btnSaveAdd" onclick="saveAdd()">Guardar</button>
    </div>
    <div id="addMsg" class="error" style="display:none;"></div>
  </div>
</div>

<!-- MODAL: EDITAR CHASIS -->
<div class="modalBackdrop" id="modalEdit">
  <div class="modal">
    <div style="display:flex;justify-content:space-between;align-items:center;gap:10px;">
      <h3>Editar Chasis</h3>
      <button class="btn secondary" onclick="closeEdit()">Cerrar</button>
    </div>

    <div class="grid" style="margin-top:10px;">
      <div>
        <label class="muted"><b>Interno</b></label>
        <input id="eInterno" placeholder="Ej: 1234" />
        <div class="hint">Completar Interno y Dominio es obligatorio.</div>
      </div>
      <div>
        <label class="muted"><b>Dominio</b></label>
        <input id="eDominio" placeholder="Dominio/Patente (Ej: AE123BC)" />
      </div>
      <div>
        <label class="muted"><b>Sociedad</b></label>
        <input id="eSociedad" placeholder="Dueño/Empresa" />
      </div>
      <div>
        <label class="muted"><b>Depósito</b></label>
        <input id="eDeposito" placeholder="Ej: Central / Taller / Base" />
      </div>

      <div>
        <label class="muted"><b>Tipo</b></label>
        <input id="eTipo" placeholder="Tipo de chasis" />
      </div>
      <div>
        <label class="muted"><b>Km Recorridos</b></label>
        <input id="eKm" placeholder="0" />
      </div>

      <div>
        <label class="muted"><b>Capacidad de Carga</b></label>
        <input id="eCapacidad" placeholder="Ej: 30T / 45000kg" />
      </div>
      <div>
        <label class="muted"><b>Nro. Chasis</b></label>
        <input id="eNroChasis" placeholder="Número de chasis" />
      </div>

      <div>
        <label class="muted"><b>Marca</b></label>
        <input id="eMarca" placeholder="Marca" />
      </div>
      <div>
        <label class="muted"><b>Modelo</b></label>
        <input id="eModelo" placeholder="Modelo" />
      </div>

      <div>
        <label class="muted"><b>Motor</b></label>
        <input id="eMotor" placeholder="Motor" />
      </div>
      <div>
        <label class="muted"><b>Nro Motor</b></label>
        <input id="eNroMotor" placeholder="Número de motor" />
      </div>

      <div>
        <label class="muted"><b>Año</b></label>
        <input id="eAnio" placeholder="Ej: 2018" />
      </div>

      <div>
        <label class="muted"><b>Eje</b></label>
        <select id="eEje"></select>
      </div>

      <div>
        <label class="muted"><b>Mapa Cubierta</b></label>
        <select id="eMapa"></select>
      </div>

      <div>
        <label class="muted"><b>Carrocería</b></label>
        <select id="eCarroceria"></select>
      </div>

      <div>
        <label class="muted"><b>Estado</b></label>
        <select id="eEstado">
          <option value="activo">activo</option>
          <option value="inactivo">inactivo</option>
          <option value="baja">baja</option>
        </select>
      </div>
    </div>

    <div style="display:flex;gap:10px;justify-content:flex-end;margin-top:12px;">
      <button class="btn secondary" onclick="closeEdit()">Cancelar</button>
      <button class="btn" id="btnSaveEdit" onclick="saveEdit()">Guardar cambios</button>
    </div>
    <div id="editMsg" class="error" style="display:none;"></div>
  </div>
</div>

<!-- MODAL: NUEVO MOVIMIENTO (PRO) -->
<div class="modalBackdrop" id="modalMov">
  <div class="modal">
    <div style="display:flex;justify-content:space-between;align-items:center;gap:10px;">
      <h3>Nuevo Movimiento</h3>
      <button class="btn secondary" onclick="closeMov()">Cerrar</button>
    </div>

    <div class="grid" style="margin-top:10px;">
      <div>
        <label class="muted"><b>Unidad</b></label>
        <select id="mUnidadSel"></select>
        <div class="hint">Interno — Dominio — Sociedad</div>
      </div>

      <div>
        <label class="muted"><b>Tipo</b></label>
        <div class="toggleRow">
          <button class="tbtn" id="tIngreso" onclick="setTipoMov('ingreso')">Ingreso</button>
          <button class="tbtn" id="tEgreso" onclick="setTipoMov('egreso')">Egreso</button>
        </div>
        <div class="hint">Elegí uno (obligatorio).</div>
      </div>

      <div>
        <label class="muted"><b>Fecha</b></label>
        <input id="mFecha" type="date" />
      </div>

      <div>
        <label class="muted"><b>Hora</b></label>
        <input id="mHora" type="time" />
      </div>

      <div>
        <label class="muted"><b>Depósito</b></label>
        <select id="mDepositoSel"></select>
        <div class="hint">Si no está, elegí “Otro…”</div>
      </div>

      <div id="mDepositoOtherWrap" style="display:none;">
        <label class="muted"><b>Depósito (Otro)</b></label>
        <input id="mDepositoOther" placeholder="Escribí depósito..." />
      </div>

      <div>
        <label class="muted"><b>Último odómetro (auto)</b></label>
        <input id="mUlt" disabled />
        <div class="hint">Se completa al seleccionar unidad.</div>
      </div>

      <div>
        <label class="muted"><b>Odómetro</b></label>
        <input id="mOdo" placeholder="Ej: 250000" />
        <div class="hint" id="mOdoHint">No puede ser menor al último.</div>
      </div>

      <div>
        <label class="muted"><b>Km recorridos (auto)</b></label>
        <input id="mKm" disabled />
        <div class="hint">Se calcula al escribir el odómetro.</div>
      </div>

      <div style="grid-column:1/-1">
        <label class="muted"><b>Observación</b></label>
        <textarea id="mObs" placeholder="(Opcional) Detalle del movimiento"></textarea>
      </div>
    </div>

    <div style="display:flex;gap:10px;justify-content:flex-end;margin-top:12px;">
      <button class="btn secondary" onclick="closeMov()">Cancelar</button>
      <button class="btn" id="btnSaveMov" onclick="saveMov()">Guardar movimiento</button>
    </div>
    <div id="movMsg" class="error" style="display:none;"></div>
  </div>
</div>

<!-- MODAL: NUEVA TAREA -->
<div class="modalBackdrop" id="modalTarea">
  <div class="modal">
    <div style="display:flex;justify-content:space-between;align-items:center;gap:10px;">
      <h3>Nueva Tarea</h3>
      <button class="btn secondary" onclick="closeTarea()">Cerrar</button>
    </div>

    <div class="grid" style="margin-top:10px;">
      <div>
        <label class="muted"><b>Código</b></label>
        <input id="tcodigo" placeholder="Ej: PREV-001" />
        <div class="hint">Obligatorio</div>
      </div>

      <div>
        <label class="muted"><b>Nombre</b></label>
        <input id="tnombre" placeholder="Ej: Cambio de aceite motor" />
        <div class="hint">Obligatorio</div>
      </div>

      <div>
        <label class="muted"><b>Sistema</b></label>
        <select id="tsistema"></select>
        <div class="hint">Obligatorio</div>
      </div>

      <div>
        <label class="muted"><b>Subsistema</b></label>
        <select id="tsubsistema"></select>
        <div class="hint">Obligatorio</div>
      </div>

      <div style="grid-column:1/-1">
        <label class="muted"><b>Sector</b></label>
        <select id="tsector"></select>
        <div class="hint">Obligatorio</div>
      </div>
    </div>

    <div style="display:flex;gap:10px;justify-content:flex-end;margin-top:12px;">
      <button class="btn secondary" onclick="closeTarea()">Cancelar</button>
      <button class="btn" id="btnSaveTarea" onclick="saveTarea()">Guardar tarea</button>
    </div>

    <div id="tMsg" class="error" style="display:none;"></div>
  </div>
</div>

<!-- MODAL: CONFIRMAR BORRADO TAREA -->
<div class="modalBackdrop" id="modalConfirmTarea" style="display:none">
  <div class="modal" style="max-width:560px">
    <div style="display:flex;justify-content:space-between;align-items:center;gap:10px;">
      <h3>Confirmar eliminación</h3>
      <button class="btn secondary" onclick="closeConfirmTarea()">Cerrar</button>
    </div>

    <div class="card" style="margin-top:10px;border-radius:14px">
      <div class="muted" style="font-weight:900;margin-bottom:6px">Vas a eliminar esta tarea:</div>
      <div style="display:grid;gap:6px">
        <div><b>Código:</b> <span id="cDelCod">-</span></div>
        <div><b>Nombre:</b> <span id="cDelNom">-</span></div>
        <div class="muted" style="font-size:12px;margin-top:6px">
          Esto la marca como <b>TRUE</b> en “borrado” y no se verá (salvo que actives “Ver eliminados”).
        </div>
      </div>
      <div id="cDelMsg" class="error" style="display:none"></div>
    </div>

    <div style="display:flex;gap:10px;justify-content:flex-end;margin-top:12px;">
      <button class="btn secondary" onclick="closeConfirmTarea()">Cancelar</button>
      <button class="btn" id="btnConfirmDelTarea" onclick="doBorrarTarea()">Sí, eliminar</button>
    </div>
  </div>
</div>

<div class="toast" id="toast"></div>





